<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Notifications Test - Task Manager</title>  <link rel="stylesheet" href="css/test_email.css">
</head>
<body>
    <div class="container">
        <a href="dashboard.html" class="back-link">‚Üê Back to Dashboard</a>
        
        <div class="header">
            <h1>üìß Email Notifications Test Panel</h1>
            <p>Test all email notification functions and check deadline notifications</p>
        </div>

        <div class="stats-section">
            <h2 style="color: #667eea; margin-bottom: 1rem;">üìä Current User Info</h2>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="value" id="userIdDisplay">-</div>
                    <div class="label">User ID</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="userEmailDisplay">-</div>
                    <div class="label">Email</div>
                </div>
                <div class="stat-box">
                    <div class="value" id="userNameDisplay">-</div>
                    <div class="label">Name</div>
                </div>
            </div>
        </div>

        <div class="test-grid">
            <!-- Test 1: Direct Notification -->
            <div class="test-card">
                <h2>üì® Send Test Email</h2>
                <p class="description">Send a test email directly to yourself without creating tasks or notifications.</p>
                <div class="form-group">
                    <label>Email Subject</label>
                    <input type="text" id="directTitle" value="Test Email from Task Manager" placeholder="Email subject">
                </div>
                <div class="form-group">
                    <label>Email Body</label>
                    <textarea id="directBody" placeholder="Email message">This is a test email sent from the email notification test panel. Your email notification system is working correctly!</textarea>
                </div>
                <button class="btn" onclick="sendDirectNotification()">
                    Send Test Email
                </button>
                <div class="result" id="directResult"></div>
            </div>

            <!-- Test 2: Check Deadlines -->
            <div class="test-card">
                <h2>‚è∞ Check Deadlines</h2>
                <p class="description">Trigger deadline check for tasks due in the next specified hours.</p>
                <div class="form-group">
                    <label>Lookahead Hours</label>
                    <input type="number" id="deadlineHours" value="168" min="1" max="720">
                    <div class="small-text">Check tasks due in the next X hours (default: 168 = 7 days)</div>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="resendExisting" checked> Resend for existing notifications
                    </label>
                </div>
                <button class="btn" onclick="checkDeadlines()">
                    Check Deadlines
                </button>
                <div class="result" id="deadlineResult"></div>
            </div>

            <!-- Test 3: Get Due Today Tasks -->
            <div class="test-card">
                <h2>üìÖ Tasks Due Today</h2>
                <p class="description">Retrieve all tasks due today that involve you.</p>
                <button class="btn btn-secondary" onclick="getDueToday()">
                    Get Tasks Due Today
                </button>
                <div class="result" id="dueTodayResult"></div>
            </div>

            <!-- Test 4: Create Test Task with Deadline -->
            <div class="test-card">
                <h2>‚úÖ Create Test Task</h2>
                <p class="description">Create a test task with a near-future deadline to trigger notifications.</p>
                <div class="form-group">
                    <label>Task Title</label>
                    <input type="text" id="taskTitle" value="Test Task for Email" placeholder="Task title">
                </div>
                <div class="form-group">
                    <label>Due Date (Hours from now)</label>
                    <input type="number" id="taskHours" value="2" min="1" max="168">
                    <div class="small-text">Task will be due in X hours</div>
                </div>
                <div class="form-group">
                    <label>Project (Optional)</label>
                    <select id="taskProject">
                        <option value="">No Project</option>
                    </select>
                </div>
                <button class="btn" onclick="createTestTask()">
                    Create Test Task
                </button>
                <div class="result" id="taskResult"></div>
            </div>
        </div>

        <!-- Recent Notifications Display -->
        <div class="stats-section">
            <h2 style="color: #667eea; margin-bottom: 1rem;">üì¨ Recent Notifications</h2>
            <button class="btn btn-secondary" onclick="loadRecentNotifications()" style="max-width: 300px; margin-bottom: 1rem;">
                Refresh Notifications
            </button>
            <div id="notificationsList" style="margin-top: 1rem;">
                <p style="color: #888;">Click refresh to load notifications...</p>
            </div>
        </div>
    </div>

    <script src="scripts/common.js"></script>  <script src="scripts/test_email.js"></script>
</body>
</html>
