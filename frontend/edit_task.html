<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Task - Task Manager</title>  <link rel="stylesheet" href="css/edit_task.css">
</head>
<body>
  <div id="nav"></div>
  <script src="scripts/common.js"></script><div class="container">
        <div class="header">
            <div class="logo">âœï¸</div>
            <h1>Edit Task</h1>
            <p>Update task details and track progress</p>
        </div>
        
        <div class="message" id="message"></div>
        
        <!-- Task Info Display -->
        <div class="task-info" id="taskInfo" style="display: none;">
            <div class="task-meta">
                <span><strong>Task ID:</strong> <span id="taskId">-</span></span>
                <span><strong>Created:</strong> <span id="createdDate">-</span></span>
                <span><strong>Created by:</strong> <span id="createdBy">-</span></span>
            </div>
        </div>
        
        <div class="loading" id="pageLoading">
            Loading task details
        </div>
        
        <form id="editTaskForm" style="display: none;" novalidate>
            <div class="form-group">
                <label for="title">
                    Task Title <span class="required">*</span>
                </label>
                <input 
                    type="text" 
                    id="title" 
                    name="title" 
                    placeholder="e.g., Fix login bug or Design homepage" 
                    required
                    maxlength="100"
                >
                <div class="input-hint">Brief, descriptive title (3-100 characters)</div>
            </div>
            
            <div class="form-group">
                <label for="description">
                    Description <span class="required">*</span>
                </label>
                <textarea 
                    id="description" 
                    name="description" 
                    placeholder="Describe what needs to be done..."
                    required
                    maxlength="500"
                ></textarea>
                <div class="input-hint">Detailed description of the task (10-500 characters)</div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="priority">Priority</label>
                    <select id="priority" name="priority">
                        <option value="Low">ğŸŸ¢ Low Priority</option>
                        <option value="Medium">ğŸŸ¡ Medium Priority</option>
                        <option value="High">ğŸ”´ High Priority</option>
                        <option value="Urgent">ğŸš¨ Urgent</option>
                    </select>
                    <div class="input-hint">How urgent is this task?</div>
                </div>
                
                <div class="form-group">
                    <label for="status">Status</label>
                    <select id="status" name="status">
                        <option value="To Do">ğŸ“‹ To Do</option>
                        <option value="In Progress">â³ In Progress</option>
                        <option value="Completed">âœ… Completed</option>
                        <option value="Blocked">ğŸš« Blocked</option>
                    </select>
                    <div class="input-hint">Current task status</div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="due_date">Due Date (Optional)</label>
                <input 
                    type="datetime-local" 
                    id="due_date" 
                    name="due_date"
                >
                <div class="input-hint">When should this task be completed?</div>
            </div>
            
            <div style="border:1px solid #e1e5e9;padding:1rem;margin:1.5rem 0;border-radius:8px;background:#f8f9fa">
                <label style="display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:500;margin-bottom:0">
                    <input type="checkbox" id="is_recurring" style="width:auto;margin:0" />
                    <span>ğŸ”„ Make this a recurring task</span>
                </label>
                <div id="recurring_options" style="display:none;margin-top:1rem">
                    <div class="form-group" style="margin-bottom:0.5rem">
                        <label for="recurrence_interval_days">Recurrence Interval (days)</label>
                        <input type="number" id="recurrence_interval_days" min="1" placeholder="e.g., 1 for daily, 7 for weekly" />
                    </div>
                    <div class="input-hint" style="margin-top:0.5rem">
                        ğŸ“… The task will automatically recur after completion. The next occurrence will be created with a due date calculated from the original due date + interval.
                    </div>
                    <div id="recurring_info" style="display:none;margin-top:0.5rem;padding:0.75rem;background:#e3f2fd;border-radius:6px;color:#1976d2;font-size:0.9rem">
                        â„¹ï¸ <span id="recurring_info_text"></span>
                    </div>
                </div>
            </div>
            
            <div class="loading" id="formLoading">
                Updating task
            </div>
            
            <div class="btn-group">
                <button type="submit" class="btn btn-primary" id="updateBtn">
                    Update Task
                </button>
                
                <button type="button" class="btn btn-secondary" onclick="goToDashboard()">
                    Cancel
                </button>
                
                <button type="button" class="btn btn-danger" onclick="confirmDelete()" id="deleteBtn">
                    Archive Task
                </button>
            </div>
        </form>
        
        <div class="form-footer">
            <a href="dashboard.html" class="back-link">â† Back to Dashboard</a>
            <span>|</span>
            <a href="create_task.html" class="back-link">Create New Task</a>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ—‘ï¸ Archive Task</h3>
            <p id="deleteMessage">Are you sure you want to Archive this task?</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                <button class="btn btn-danger" onclick="executeDelete()" id="confirmDeleteBtn">
                    Archive Task
                </button>
            </div>
        </div>
    </div>  <script src="scripts/edit_task.js"></script>
</body></html>