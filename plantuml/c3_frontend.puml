@startuml c3_frontend
!include <C4/C4_Component>

title C3 - Component Diagram (Frontend Web Application)

Person(user, "User", "Staff/Manager/Admin")
Container(apiServer, "API Server", "Flask", "Backend REST API")
System_Ext(firebaseAuth, "Firebase Auth", "Authentication")

Container_Boundary(webApp, "Web Application") {
    Component(indexPage, "Index Page", "index.html", "Landing page with navigation to login/dashboard")
    Component(loginPage, "Login Page", "login.html", "User authentication with Firebase")
    Component(dashboardPage, "Dashboard Pages", "dashboard.html, manager_dashboard.html, admin_dashboard.html", "Role-based dashboards showing task summaries, team insights, statistics")
    Component(tasksPages, "Tasks Pages", "tasks_list.html, create_task.html, edit_task.html, task_detail.html", "Task management interfaces with subtask support")
    Component(projectsPage, "Projects Page", "projects.html", "Project listing and management")
    Component(managerTeamView, "Manager Team View", "manager_team_view.html", "Team member task overview for managers")
    Component(taskNotesPage, "Task Notes Page", "task_notes.html", "Task comments and notes with @mentions")
    Component(attachmentsPage, "Attachments Page", "attachments.html", "File attachment upload and management")
    Component(userPages, "User Management", "create_user.html, create_user_firebase.html", "User creation and management (admin only)")
    Component(testEmailPage, "Test Email Page", "test_email.html", "Email notification testing interface")
    Component(firebaseConfig, "Firebase Config", "firebase-config.js", "Firebase configuration and initialization")
    Component(firebaseAuthJS, "Firebase Auth Module", "firebase-auth.js", "Firebase authentication helper functions, token management")
    Component(commonJS, "Common Utilities", "common.js", "Shared JavaScript utilities, API calls, navigation, auth checks")
    Component(utilsJS, "Utils Module", "utils.js", "General utility functions, date formatting, validation")
}

Rel(user, indexPage, "Navigates to")
Rel(user, loginPage, "Logs in")
Rel(user, dashboardPage, "Views dashboard")
Rel(user, tasksPages, "Manages tasks and subtasks")
Rel(user, projectsPage, "Manages projects")
Rel(user, managerTeamView, "Views team tasks")
Rel(user, taskNotesPage, "Adds comments with @mentions")
Rel(user, attachmentsPage, "Uploads files")
Rel(user, userPages, "Creates users")
Rel(user, testEmailPage, "Tests email notifications")

Rel(loginPage, firebaseAuthJS, "Uses for authentication")
Rel(firebaseAuthJS, firebaseConfig, "Uses configuration")
Rel(firebaseAuthJS, firebaseAuth, "Authenticates users", "Firebase SDK")

Rel(indexPage, commonJS, "Uses")
Rel(dashboardPage, commonJS, "Uses for API calls")
Rel(tasksPages, commonJS, "Uses for API calls")
Rel(projectsPage, commonJS, "Uses for API calls")
Rel(managerTeamView, commonJS, "Uses for API calls")
Rel(taskNotesPage, commonJS, "Uses for API calls")
Rel(attachmentsPage, commonJS, "Uses for API calls")
Rel(userPages, commonJS, "Uses for API calls")
Rel(testEmailPage, commonJS, "Uses for API calls")

Rel(commonJS, utilsJS, "Uses utility functions")
Rel(commonJS, apiServer, "Makes API requests", "JSON/HTTPS")
Rel(firebaseAuthJS, apiServer, "Sends auth tokens", "HTTPS Headers")

@enduml